"use strict";(()=>{var e={};e.id=320,e.ids=[320],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},17576:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>m,serverHooks:()=>w,staticGenerationAsyncStorage:()=>g});var o={};r.r(o),r.d(o,{DELETE:()=>c,GET:()=>u,PATCH:()=>d});var a=r(49303),n=r(88716),s=r(60670),p=r(19893),i=r(41563);async function u(e,{params:t}){try{await (0,p.P)();let e=await i.Z.findById(t.id).populate("creator");if(!e)return new Response("Prompt not found",{status:404});return new Response(JSON.stringify(e),{status:200})}catch(e){return new Response("Failed to fetch all prompts",{status:500})}}async function d(e,{params:t}){let{prompt:r,tag:o}=await e.json();try{await (0,p.P)();let e=await i.Z.findById(t.id);if(!e)return new Response("Prompt not found",{status:404});return e.prompt=r,e.tag=o,await e.save(),new Response(JSON.stringify(e),{status:200})}catch(e){return new Response("Failed to update the prompt",{status:500})}}async function c(e,{params:t}){try{return await (0,p.P)(),await i.Z.findByIdAndDelete(t.id),new Response("Prompt deleted successfully",{status:200})}catch(e){return new Response("Failed to delete prompt",{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/prompt/[id]/route",pathname:"/api/prompt/[id]",filename:"route",bundlePath:"app/api/prompt/[id]/route"},resolvedPagePath:"C:\\Room\\Next js\\share_prompts\\app\\api\\prompt\\[id]\\route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:w}=m,y="/api/prompt/[id]/route";function h(){return(0,s.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:g})}},41563:(e,t,r)=>{r.d(t,{Z:()=>n});var o=r(11185);let a=new o.Schema({creator:{type:o.Schema.Types.ObjectId,ref:"User"},prompt:{type:String,required:[!0,"Prompt is required"]},tag:{type:String,required:[!0,"Tag is reuiqred"]}}),n=o.models.Prompt||(0,o.model)("Prompt",a)},49303:(e,t,r)=>{e.exports=r(30517)},19893:(e,t,r)=>{r.d(t,{P:()=>n});var o=r(11185),a=r.n(o);let n=async()=>{a().connect("mongodb+srv://nourkhansa7:1RXm9gw4gBOhiPgT@protopia.kurwnz6.mongodb.net/?retryWrites=true&w=majority&appName=protopia").then(()=>console.log("Connected to DB")).catch(e=>console.log(e))}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[948],()=>r(17576));module.exports=o})();